<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Saih Store - CAN 2025 MOROCCO</title>

    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1910150606256826');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1910150606256826&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->

    <!-- TikTok Pixel Code -->
    <script>
    !function (w, d, t) {
      w.Tawk_Alphabet = t;
      var n = w.ttq = w.ttq || []; n.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"], n.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }; for (var e = 0; e < n.methods.length; e++)n.setAndDefer(n, n.methods[e]); n.instance = function (t) { for (var e = n._i[t] || [], i = 0; i < n.methods.length; i++)n.setAndDefer(e, n.methods[i]); return e }; n.load = function (e, i) { var a = "https://analytics.tiktok.com/i18n/pixel/events.js"; n._i = n._i || {}, n._i[e] = [], n._i[e]._u = a, n._t = n._t || {}, n._t[e] = +new Date, n._o = n._o || {}, n._o[e] = i || {}; var o = d.createElement("script"); o.type = "text/javascript", o.async = !0, o.src = a + "?sdkid=" + e + "&lib=" + n.methods[0]; var r = d.getElementsByTagName("script")[0]; r.parentNode.insertBefore(o, r) };
      
      ttq.load('YOUR_TIKTOK_PIXEL_ID'); // Ø¶Ø¹ÙŠ ID Ø§Ù„Ø¨ÙŠÙƒØ³Ù„ Ø§Ù„Ø®Ø§Øµ Ø¨ØªÙŠÙƒ ØªÙˆÙƒ Ù‡Ù†Ø§
      ttq.page();
    }(window, document, 'ttq');
    </script>
    <!-- End TikTok Pixel Code -->
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root { 
            --primary-color: #d4af37; 
            --danger-color: #c1272d;  
            --success-color: #006233; 
            --bg-color: #000000;
            --card-bg: #151515;
            --input-bg: #1f1f1f;
            --text-main: #ffffff;
            --text-sub: #a1a1aa;
            --border-color: #333333;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Cairo', sans-serif; 
            background-color: var(--bg-color); 
            background-image: url('https://www.transparenttextures.com/patterns/carbon-fibre.png');
            color: var(--text-main); 
            direction: rtl; 
            text-align: right; 
            padding-bottom: 80px; 
            overflow-x: hidden; 
        }

        header { 
            background-color: var(--danger-color); 
            box-shadow: 0 4px 20px rgba(0,0,0,0.5); 
            border-bottom: 3px solid var(--primary-color);
            position: sticky; top: 0; z-index: 1000; 
        }
        .header-container { display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; max-width: 1200px; margin: 0 auto; height: 70px; }
        .logo img { height: 50px; object-fit: contain; }
        
        .header-icons { display: flex; gap: 15px; align-items: center; }
        .icon-btn { font-size: 24px; cursor: pointer; color: white; position: relative; }
        .cart-badge { 
            position: absolute; top: -8px; right: -8px; 
            background-color: var(--success-color); color: white; 
            font-size: 11px; width: 22px; height: 22px; 
            border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; border: 2px solid white;
        }

        .section-title { text-align: center; margin: 40px 0 30px; font-size: 28px; font-weight: 900; color: var(--primary-color); text-shadow: 2px 2px 5px rgba(0,0,0,0.5); }
        .section-title::after { content: "ğŸ‡²ğŸ‡¦ ğŸ† ğŸ‡²ğŸ‡¦"; display: block; font-size: 18px; margin-top: 10px; }
        
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; padding: 0 15px; max-width: 1200px; margin: 0 auto; }
        
        .product-card { 
            background: var(--card-bg); 
            border-radius: 20px; padding: 20px; position: relative; 
            display: flex; flex-direction: column; 
            border: 2px solid var(--border-color); 
            transition: 0.3s;
        }
        .product-card:hover { border-color: var(--primary-color); transform: translateY(-5px); }
        
        .product-img-container { position: relative; width: 100%; aspect-ratio: 1/1; margin-bottom: 15px; border-radius: 15px; overflow: hidden; background: #fff; border: 1px solid var(--primary-color); }
        .product-img { width: 100%; height: 100%; object-fit: contain; }
        
        .discount-tag { position: absolute; top: 15px; right: 15px; background: var(--danger-color); color: white; padding: 5px 12px; border-radius: 8px; font-size: 12px; font-weight: bold; z-index: 2; border: 1px solid var(--primary-color); }

        .product-title { font-size: 17px; font-weight: 800; margin-bottom: 10px; color: var(--primary-color); min-height: 45px; }
        .price-box { display: flex; gap: 10px; align-items: center; margin-bottom: 15px; }
        .curr-price { color: white; font-weight: 900; font-size: 22px; }

        /* Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ­Øª Ø§Ù„Ù…Ù†ØªØ¬ */
        .direct-form {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px dashed var(--primary-color);
        }
        .direct-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--input-bg);
            color: white;
            font-family: 'Cairo', sans-serif;
        }
        .direct-form input:focus { border-color: var(--success-color); }

        .actions-btn { display: flex; gap: 10px; }
        .buy-now-btn { flex: 2; background: var(--success-color); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 900; font-size: 16px; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.4); }
        .buy-now-btn:hover { background: #0e9f6e; transform: scale(1.02); }
        .add-cart-btn { flex: 1; background: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); border-radius: 10px; cursor: pointer; font-size: 20px; display: flex; justify-content: center; align-items: center; }

        /* Ø§Ù„ÙÙˆØªØ± */
        .mobile-bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--danger-color); display: flex; justify-content: space-around; padding: 15px 0; border-top: 3px solid var(--primary-color); z-index: 1500; }
        .nav-item { color: white; font-weight: bold; text-align: center; font-size: 12px; }
        .whatsapp-float { position: fixed; bottom: 90px; left: 20px; background: #25d366; color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 35px; box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 1400; border: 2px solid white; }

        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 3000; justify-content: center; align-items: center; }
        .modal-content { background: var(--card-bg); width: 90%; max-width: 450px; padding: 30px; border-radius: 20px; border: 2px solid var(--primary-color); position: relative; }
        .close-modal { position: absolute; top: 15px; right: 15px; color: white; font-size: 25px; cursor: pointer; }

        @media (max-width: 768px) {
            .products-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="lang-splash" id="langSplash" style="display:none;">
        <div class="lang-box" style="text-align: center;">
            <img src="https://i.postimg.cc/g0ybBZ6t/IMG-20251126-205405-472.jpg" style="height:100px; margin-bottom: 20px;">
            <h2 style="color:white; margin-bottom: 30px;">MAROC 2025 ğŸ† Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ©</h2>
            <button onclick="selectLanguage('ar')" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; background:var(--danger-color); color:white; font-weight:bold; border:none; cursor:pointer;">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ğŸ‡²ğŸ‡¦</button>
            <button onclick="selectLanguage('en')" style="width:100%; padding:15px; border-radius:10px; background:var(--card-bg); color:white; font-weight:bold; border:1px solid white; cursor:pointer;">English ğŸ‡¬ğŸ‡§</button>
        </div>
    </div>

    <header>
        <div class="header-container">
            <div class="logo"><img src="https://i.postimg.cc/g0ybBZ6t/IMG-20251126-205405-472.jpg" alt="Logo"></div>
            <div class="header-icons">
                <div class="icon-btn" onclick="openCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-badge" id="cartBadge">0</span>
                </div>
            </div>
        </div>
    </header>

    <div class="hero-slider"><img src="https://i.postimg.cc/VvFWP3Vq/1764285865239.png" style="width:100%; border-bottom: 3px solid var(--primary-color);"></div>

    <div id="products">
        <div class="section-title" data-i18n="featured_offers">Ø¹Ø±ÙˆØ¶ ÙƒØ£Ø³ Ø¥ÙØ±ÙŠÙ‚ÙŠØ§ Ù„Ù„Ø£Ù…Ù… - Ø§Ù„Ù…ØºØ±Ø¨ 2025</div>
        <div class="products-grid" id="products-container">
            <!-- Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù‡Ù†Ø§ -->
        </div>
    </div>

    <div class="mobile-bottom-nav">
        <div class="nav-item" onclick="window.scrollTo(0,0)"><i class="fas fa-home"></i><br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div class="nav-item" onclick="openCart()"><i class="fas fa-shopping-cart"></i><br>Ø§Ù„Ø³Ù„Ø©</div>
        <div class="nav-item" onclick="window.location.href='https://wa.me/212695050162'"><i class="fab fa-whatsapp"></i><br>ÙˆØ§ØªØ³Ø§Ø¨</div>
    </div>

    <a href="https://wa.me/212695050162" class="whatsapp-float"><i class="fab fa-whatsapp"></i></a>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø³Ù„Ø© -->
    <div class="modal-overlay" id="cartModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeCart()">&times;</span>
            <h3 style="color:var(--primary-color); text-align:center; margin-bottom:20px;">Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
            <div id="cartItemsList" style="max-height: 300px; overflow-y: auto;"></div>
            <div style="padding:15px; border-top:1px solid #333; margin-top:15px; display:flex; justify-content:space-between; color:white; font-weight:bold;">
                <span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span>
                <span><span id="cartTotal">0</span> Ø¯.Ù…</span>
            </div>
            <button onclick="openCartOrderForm()" style="width:100%; padding:15px; background:var(--success-color); color:white; border:none; border-radius:10px; font-weight:bold; margin-top:15px;">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø·Ù„Ø¨ Ø§Ù„Ø³Ù„Ø© -->
    <div class="modal-overlay" id="cartOrderModal">
        <div class="modal-content">
            <span class="close-modal" onclick="document.getElementById('cartOrderModal').style.display='none'">&times;</span>
            <h3 style="color:var(--primary-color); text-align:center; margin-bottom:20px;">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„</h3>
            <form onsubmit="submitCartOrder(event)">
                <input type="text" id="c_name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; background:#1f1f1f; color:white; border:1px solid #333;" required>
                <input type="tel" id="c_phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" style="width:100%; padding:12px; margin-bottom:10px; border-radius:8px; background:#1f1f1f; color:white; border:1px solid #333;" required>
                <input type="text" id="c_city" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù†" style="width:100%; padding:12px; margin-bottom:20px; border-radius:8px; background:#1f1f1f; color:white; border:1px solid #333;" required>
                <button type="submit" style="width:100%; padding:15px; background:var(--success-color); color:white; border:none; border-radius:10px; font-weight:bold;">ØªØ£ÙƒÙŠØ¯ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
            </form>
        </div>
    </div>

    <script>
        const SHEET_ID = "1RmpZOJkkQTvYLPXNUxBxHkuNcqoiFn1z5Y0ZbQyx3vk"; 
        const MY_PHONE = "212695050162"; 

        let cart = JSON.parse(localStorage.getItem('myCart')) || [];
        let currentLang = localStorage.getItem('lang') || 'ar';

        if(!localStorage.getItem('lang')) document.getElementById('langSplash').style.display = 'flex';

        function selectLanguage(lang) {
            localStorage.setItem('lang', lang);
            location.reload();
        }

        async function fetchProducts() {
            try {
                const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json`;
                const res = await fetch(url);
                const text = await res.text();
                const json = JSON.parse(text.substr(47).slice(0, -2));
                const container = document.getElementById('products-container');
                container.innerHTML = "";

                json.table.rows.forEach((row, index) => {
                    const title = row.c[0]?.v || "";
                    let price = row.c[1]?.v || "0";
                    const disc = row.c[3]?.v || "";
                    let imgStr = row.c[4]?.v || "";
                    if(title === "title" || !title) return;
                    
                    const images = imgStr.split(',').map(i => i.trim());
                    const safeTitle = title.replace(/'/g, "\\'");

                    container.innerHTML += `
                        <div class="product-card">
                            ${disc ? `<div class="discount-tag">${disc}</div>` : ''}
                            <div class="product-img-container"><img src="${images[0]}" class="product-img"></div>
                            <div class="product-title">${title}</div>
                            <div class="price-box"><span class="curr-price">${price} Ø¯.Ù…</span></div>
                            
                            <div class="direct-form">
                                <input type="text" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" id="n-${index}">
                                <input type="tel" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" id="p-${index}">
                                <input type="text" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù†" id="a-${index}">
                                <input type="text" placeholder="Ø§Ù„Ù…Ù‚Ø§Ø³ (Size)" id="s-${index}">
                            </div>

                            <div class="actions-btn">
                                <button class="buy-now-btn" onclick="quickOrder(${index}, '${safeTitle}', '${price}')">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
                                <button class="add-cart-btn" onclick="addToCart('${safeTitle}', '${price}', '${images[0]}')"><i class="fas fa-cart-plus"></i></button>
                            </div>
                        </div>
                    `;
                });
            } catch (e) { console.error(e); }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (Purchase)
        function quickOrder(idx, title, price) {
            const name = document.getElementById(`n-${idx}`).value;
            const phone = document.getElementById(`p-${idx}`).value;
            const addr = document.getElementById(`a-${idx}`).value;
            const size = document.getElementById(`s-${idx}`).value;

            if(!name || !phone || !addr) {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©"); return;
            }

            // ØªØªØ¨Ø¹ Ø§Ù„Ø¨ÙŠÙƒØ³Ù„ - Meta
            if(typeof fbq !== 'undefined') fbq('track', 'Purchase', { value: parseFloat(price), currency: 'MAD' });
            
            // ØªØªØ¨Ø¹ Ø§Ù„Ø¨ÙŠÙƒØ³Ù„ - TikTok
            if(typeof ttq !== 'undefined') ttq.track('CompletePayment', { content_name: title, value: parseFloat(price), currency: 'MAD' });

            const msg = `ğŸ¦ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ (CAN 2025)*%0a%0a` +
                        `ğŸ“¦ *Ø§Ù„Ù…Ù†ØªØ¬:* ${title}%0a` +
                        `ğŸ’° *Ø§Ù„Ø«Ù…Ù†:* ${price} Ø¯.Ù…%0a` +
                        `ğŸ“ *Ø§Ù„Ù…Ù‚Ø§Ø³:* ${size || '---'}%0a` +
                        `Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€%0a` +
                        `ğŸ‘¤ *Ø§Ù„Ø²Ø¨ÙˆÙ†:* ${name}%0a` +
                        `ğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${phone}%0a` +
                        `ğŸ“ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${addr}%0a` +
                        `Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€Ù€%0a` +
                        `ğŸ‡²ğŸ‡¦ *Ø¯ÙŠÙ…Ø§ Ù…ØºØ±Ø¨*`;

            window.open(`https://wa.me/${MY_PHONE}?text=${msg}`, '_blank');
        }

        function addToCart(title, price, img) {
            cart.push({ title, price, img });
            localStorage.setItem('myCart', JSON.stringify(cart));
            updateBadge();
            if(typeof fbq !== 'undefined') fbq('track', 'AddToCart', { content_name: title, value: price, currency: 'MAD' });
            if(typeof ttq !== 'undefined') ttq.track('AddToCart', { content_name: title, value: price, currency: 'MAD' });
        }

        function updateBadge() { document.getElementById('cartBadge').innerText = cart.length; }

        function openCart() {
            const list = document.getElementById('cartItemsList');
            let total = 0;
            list.innerHTML = cart.length ? "" : "<p style='color:white; text-align:center;'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
            cart.forEach((item, i) => {
                total += parseFloat(item.price) || 0;
                list.innerHTML += `<div style='display:flex; justify-content:space-between; color:white; margin-bottom:10px;'><span>${item.title}</span><b>${item.price} Ø¯.Ù…</b></div>`;
            });
            document.getElementById('cartTotal').innerText = total;
            document.getElementById('cartModal').style.display = 'flex';
        }

        function closeCart() { document.getElementById('cartModal').style.display = 'none'; }
        
        function openCartOrderForm() { 
            if(!cart.length) return;
            document.getElementById('cartModal').style.display = 'none'; 
            document.getElementById('cartOrderModal').style.display = 'flex'; 
        }

        function submitCartOrder(e) {
            e.preventDefault();
            const name = document.getElementById('c_name').value;
            const phone = document.getElementById('c_phone').value;
            const city = document.getElementById('c_city').value;
            let products = cart.map(item => `â–«ï¸ ${item.title}`).join('%0a');
            let total = document.getElementById('cartTotal').innerText;

            if(typeof fbq !== 'undefined') fbq('track', 'Purchase', { value: parseFloat(total), currency: 'MAD' });
            if(typeof ttq !== 'undefined') ttq.track('CompletePayment', { value: parseFloat(total), currency: 'MAD' });

            const msg = `ğŸ‘‹ *Ø·Ù„Ø¨ Ø³Ù„Ø©*%0a${products}%0ağŸ’° *Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:* ${total} Ø¯.Ù…%0ağŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${name}%0ağŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${phone}%0ağŸ“ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${city}`;
            window.open(`https://wa.me/${MY_PHONE}?text=${msg}`, '_blank');
            cart = []; localStorage.setItem('myCart', '[]'); location.reload();
        }

        updateBadge();
        fetchProducts();
    </script>
</body>
</html>

